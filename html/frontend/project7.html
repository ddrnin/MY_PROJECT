<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no , viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="format-detection" content="telephone=no">
    <meta name="view-transition" content="same-origin">
    <title>ddrnin | project7</title>

    <!-- Social Meta Tags -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:title" content="@@title ddrnin">
    <meta property="og:image" content="">
    <meta property="og:description" content="">
    <meta property="og:site_name" content="">

    <!-- css -->
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/font.css">
    <link rel="stylesheet" href="/assets/css/plugin/swiper-bundle.min.css">

    <!-- js -->
    <script src="/assets/js/plugin/jquery-3.7.0.min.js"></script><!-- jQuery 3.7.0 -->
    <script src="/assets/js/ui.common.min.js"></script><!-- 퍼블리싱용 js -->
    <script src="/assets/js/plugin/swiper-bundle.min.js"></script><!-- 스와이퍼 -->
    <!-- gsap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.1/ScrollToPlugin.min.js"></script>
    <!-- 렌니스 -->
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1/bundled/lenis.min.js"></script>
    <!-- aos -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
</head>

<body>
    <header>
        <div class="header_wrap">

            <h1 class="header_title">project7</h1>

            <!-- 헤더 인클루드 -->
        </div>
    </header>
    <div class="layoutM">
        <main class="project7">
            <img src="../../../assets/img/project7/project7_visual.jpg" alt="">
            <img src="../../../assets/img/project7/project7_evt.jpg" alt="">
            <img src="../../../assets/img/project7/project7_benefit.jpg" alt="">
            <div class="dosirak_area">
                <div class="dosirak_tray">
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                    <img src="../../../assets/img/project7/project7_dosirak.png" alt="도시락 이미지">
                    <ul class="dosirak">
                        <li><img src="" alt=""></li><!-- 메뉴 선택 시 이미지 경로 생성 -->
                        <li><img src="" alt=""></li>
                        <li><img src="" alt=""></li>
                        <li><img src="" alt=""></li>
                        <li><img src="" alt=""></li>
                        <li><img src="" alt=""></li>
                        <li><img src="" alt=""></li>
                        <li><img src="" alt=""></li>
                    </ul>
                </div>
                <img src="../../../assets/img/project7/dosirak_info.jpg" alt="해당 이미지는 참고 이미지입니다.">
                <div class="swiper_area">
                    <div class="swiper dosirak_swiper">
                        <div class="swiper-pagination"></div>
                        <div class="swiper-wrapper">
                            <div class="swiper-slide step01">
                                <div class="slide_wrap">
                                    <img src="../../../assets/img/project7/step01_tit.png" alt="밥 종류를 조립하세요">
                                    <ul>
                                        <li class="bap01">
                                            <label>
                                                <input type="checkbox" name="bap" value="">
                                                <p class="name">1백미밥(흰쌀밥)</p>
                                            </label>
                                        </li>
                                        <li class="bap02">
                                            <label>
                                                <input type="checkbox" name="bap" value="">
                                                <p class="name">흑미밥</p>
                                            </label>
                                        </li>
                                        <li class="bap04">
                                            <label>
                                                <input type="checkbox" name="bap" value="">
                                                <p class="name">잡곡밥</p>
                                            </label>
                                        </li>
                                        <li class="bap02">
                                            <label>
                                                <input type="checkbox" name="bap" value="">
                                                <p class="name">콩밥</p>
                                            </label>
                                        </li>
                                        <li class="bap02">
                                            <label>
                                                <input type="checkbox" name="bap" value="">
                                                <p class="name">현미밥</p>
                                            </label>
                                        </li>
                                        <li class="bap04">
                                            <label>
                                                <input type="checkbox" name="bap" value="">
                                                <p class="name">강황밥</p>
                                            </label>
                                        </li>
                                        <li class="bap04">
                                            <label>
                                                <input type="checkbox" name="bap" value="">
                                                <p class="name">계란볶음밥</p>
                                            </label>
                                        </li>
                                        <li class="bap04">
                                            <label>
                                                <input type="checkbox" name="bap" value="">
                                                <p class="name">간장계란밥</p>
                                            </label>
                                        </li>
                                        <li class="bap03">
                                            <label>
                                                <input type="checkbox" name="bap" value="">
                                                <p class="name">케찹계란밥</p>
                                            </label>
                                        </li>
                                        <li class="bap03">
                                            <label>
                                                <input type="checkbox" name="bap" value="">
                                                <p class="name">김치볶음밥</p>
                                            </label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="swiper-slide step02">
                                <div class="slide_wrap">
                                    <img src="../../../assets/img/project7/step02_tit.png" alt="메인 반찬을 조립하세요">
                                    <ul>
                                        <li class="main01">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">돈까스</p>
                                            </label>
                                        </li>
                                        <li class="main01">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">치즈돈까스</p>
                                            </label>
                                        </li>
                                        <li class="main01">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">치킨까스</p>
                                            </label>
                                        </li>
                                        <li class="main04">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">고추장 제육볶음</p>
                                            </label>
                                        </li>
                                        <li class="main04">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">김치 제육볶음</p>
                                            </label>
                                        </li>
                                        <li class="main03">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">소 불고기</p>
                                            </label>
                                        </li>
                                        <li class="main03">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">간장 돼지 불고기</p>
                                            </label>
                                        </li>
                                        <li class="main03">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">떡갈비</p>
                                            </label>
                                        </li>
                                        <li class="main04">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">닭강정</p>
                                            </label>
                                        </li>
                                        <li class="main02">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">고등어구이</p>
                                            </label>
                                        </li>
                                        <li class="main03">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">언양식 바싹 불고기</p>
                                            </label>
                                        </li>
                                        <li class="main04">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">부대볶음</p>
                                            </label>
                                        </li>
                                        <li class="main02">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">새우튀김</p>
                                            </label>
                                        </li>
                                        <li class="main04">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">고추장 닭갈비</p>
                                            </label>
                                        </li>
                                        <li class="main03">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">간장찜닭</p>
                                            </label>
                                        </li>
                                        <li class="main03">
                                            <label>
                                                <input type="checkbox" name="meban" value="">
                                                <p class="name">함박스테이크</p>
                                            </label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="swiper-slide step03">
                                <div class="slide_wrap">
                                    <img src="../../../assets/img/project7/step03_tit.png" alt="서브 반찬을 조립하세요">
                                    <ul>
                                        <li class="sub01">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">계란말이</p>
                                            </label>
                                        </li>
                                        <li class="sub01">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">소시지 야채볶음</p>
                                            </label>
                                        </li>
                                        <li class="sub02">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">미니떡갈비</p>
                                            </label>
                                        </li>
                                        <li class="sub02">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">미니돈까스</p>
                                            </label>
                                        </li>
                                        <li class="sub02">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">계란 장조림</p>
                                            </label>
                                        </li>
                                        <li class="sub02">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">동그랑땡</p>
                                            </label>
                                        </li>
                                        <li class="sub03">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">부추전</p>
                                            </label>
                                        </li>
                                        <li class="sub02">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">분홍소시지부침</p>
                                            </label>
                                        </li>
                                        <li class="sub03">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">김치전</p>
                                            </label>
                                        </li>
                                        <li class="sub04">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">두부부침</p>
                                            </label>
                                        </li>
                                        <li class="sub05">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">김말이</p>
                                            </label>
                                        </li>
                                        <li class="sub04">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">맛살볶음</p>
                                            </label>
                                        </li>
                                        <li class="sub04">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">어묵볶음</p>
                                            </label>
                                        </li>
                                        <li class="sub05">
                                            <label>
                                                <input type="checkbox" name="suban" value="">
                                                <p class="name">새우볼</p>
                                            </label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="swiper-slide step04">
                                <div class="slide_wrap">
                                    <img src="../../../assets/img/project7/step04_tit.png" alt="채소김치 반찬을 조립하세요">
                                    <ul>
                                        <li class="kimchi04">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">김</p>
                                            </label>
                                        </li>
                                        <li class="kimchi02">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">감자조림</p>
                                            </label>
                                        </li>
                                        <li class="kimchi02">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">콩나물무침</p>
                                            </label>
                                        </li>
                                        <li class="kimchi04">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">건새우볶음</p>
                                            </label>
                                        </li>
                                        <li class="kimchi03">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">단호박샐러드</p>
                                            </label>
                                        </li>
                                        <li class="kimchi03">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">콘샐러드</p>
                                            </label>
                                        </li>
                                        <li class="kimchi02">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">진미채</p>
                                            </label>
                                        </li>
                                        <li class="kimchi04">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">멸치볶음</p>
                                            </label>
                                        </li>
                                        <li class="kimchi04">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">양파장아찌</p>
                                            </label>
                                        </li>
                                        <li class="kimchi02">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">시금치나물</p>
                                            </label>
                                        </li>
                                        <li class="kimchi02">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">고사리나물</p>
                                            </label>
                                        </li>
                                        <li class="kimchi01">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">볶음김치</p>
                                            </label>
                                        </li>
                                        <li class="kimchi01">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">백김치</p>
                                            </label>
                                        </li>
                                        <li class="kimchi02">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">무생채</p>
                                            </label>
                                        </li>
                                        <li class="kimchi02">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">무말랭이</p>
                                            </label>
                                        </li>
                                        <li class="kimchi01">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">깍두기</p>
                                            </label>
                                        </li>
                                        <li class="kimchi02">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">단무지</p>
                                            </label>
                                        </li>
                                        <li class="kimchi01">
                                            <label>
                                                <input type="checkbox" name="kimchi" value="">
                                                <p class="name">배추김치</p>
                                            </label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="swiper-slide step05">
                                <div class="slide_wrap">
                                    <img src="../../../assets/img/project7/step05_tit.png" alt="조립완료">
                                    <ul>
                                        <li class="step01_result">
                                            <div class="img_wrap">
                                                <img src="../../../assets/img/project7/step05_name01.png" alt="밥">
                                            </div>
                                            <div class="list_wrap"><!-- 메뉴 선택 시 <p> 자동생성 -->

                                            </div>
                                        </li>
                                        <li class="step02_result">
                                            <div class="img_wrap">
                                                <img src="../../../assets/img/project7/step05_name02.png" alt="메인 반찬">
                                            </div>
                                            <div class="list_wrap">

                                            </div>
                                        </li>
                                        <li class="step03_result">
                                            <div class="img_wrap">
                                                <img src="../../../assets/img/project7/step05_name03.png" alt="서브 반찬">
                                            </div>
                                            <div class="list_wrap">

                                            </div>
                                        </li>
                                        <li class="step04_result">
                                            <div class="img_wrap">
                                                <img src="../../../assets/img/project7/step05_name04.png" alt="채소 김치">
                                            </div>
                                            <div class="list_wrap">

                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <button type="button" class="btn_project7">
                                    <img src="../../../assets/img/project7/btn_evt.png" alt="이벤트 참여하기">
                                </button>
                            </div>
                        </div>
                    </div>
                    <img src="../../../assets/img/project7/project7_info01.jpg" alt="대한민국 최초 아이돌 조립강화 오디션">
                    <div class="evt_section">
                        <img src="../../../assets/img/project7/project7_info02.jpg" alt="대한민국 최초 아이돌 조립강화 오디션">
                        <a href="https://project7.kr/" target="_blank" class="btn_info">
                            <img src="../../../assets/img/project7/btn_info.png" alt="자세히 보기">
                        </a>
                    </div>
                </div>
            </div>
            <div class="toast_pop pop01">
                <p>훌륭한 조립이예요!</p>
            </div>
            <div class="toast_pop pop02">
                <p>맛있는 프로젝트7도시락 조립 중..</p>
            </div>
            <div class="toast_pop pop03">
                <p>이제 거의 끝나가요</p>
            </div>
            <div class="toast_pop pop04">
                <p>조금만 더 조립하면 도시락 완성!</p>
            </div>
        </main>
    </div>
    <script>
        function shuffleStep(step) {
            const stepUl = $(`.step0${step} ul`);
            const lis = stepUl.children('li').get();

            lis.sort(() => 0.5 - Math.random());

            $.each(lis, function(index, li) {
                stepUl.append(li);
            });
        }
        $(document).ready(function() {
            for (i = 1; i <= 4; i++) {
                shuffleStep(i);
            }
        });

        // 프로젝트7 스와이퍼
        var swiper = new Swiper(".dosirak_swiper", {
            autoHeight: true,
            touchRatio: 0,
            speed: 500,
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            pagination: {
                el: ".swiper-pagination",
                type: 'bullets',
            },
            on: {
                slideChange: function() {
                    var activeIndex = swiper.activeIndex;
                    var previousIndex = swiper.previousIndex;
                    var bullets = document.querySelectorAll('.swiper-pagination-bullet');

                    // .active 추가 시 bullet 색상 유지
                    if (activeIndex > previousIndex) {
                        bullets.forEach(function(bullet, index) {
                            if (index <= activeIndex) {
                                bullet.classList.add('active');
                            }
                        });
                    }
                    // .active 제거 시 bullet 원래 색상
                    if (activeIndex < previousIndex) {
                        bullets.forEach(function(bullet, index) {
                            if (index > activeIndex) {
                                bullet.classList.remove('active');
                            }
                        });
                    }
                }
            },
        });

        // 다음 버튼 활성화
        function activeButton(step) {
            // step별 필요 선택 갯수
            const minChecked = {
                1: 1,
                2: 3,
                3: 2,
                4: 2
            }
            // 페이지네이션 bullet으로 스텝 체크
            if ($(`.project7 .swiper-pagination-bullet:nth-child(${step})`).hasClass('swiper-pagination-bullet-active')) {
                $('.project7 .swiper-button-next').removeClass('on');
                const stepSelector = `.step0${step}`;
                const checkedLength = $(`${stepSelector} input[type="checkbox"]:checked`).length;
                // 각 step별 필요 갯수 확인 후 다음 버튼 활성화, 체크 박스 비활성화
                if (checkedLength >= minChecked[step]) {
                    $(`${stepSelector} input[type="checkbox"]`).not(':checked').attr('disabled', true);
                    $('.project7 .swiper-button-next').addClass('on');
                } else {
                    $(`${stepSelector} input[type="checkbox"]`).removeAttr('disabled');
                }
            }
        };

        // 선택 시 도시락 트레이 이미지 업데이트
        function updateImage(step) {
            const imgTypes = ['bap', 'main', 'sub', 'kimchi'];
            const maxImgs = [1, 3, 2, 2]

            $(`.step0${step} li input[type="checkbox"]`).on('change', function() {
                // li의 class 추출하여 종류별 이미지 처리
                const liClass = $(this).closest('li').attr('class');
                const imgTypeMatch = liClass.match(/(bap|main|sub|kimchi)(\d+)/);
                if (imgTypeMatch) {
                    const imgType = imgTypeMatch[1];
                    const checkedIndex = imgTypeMatch[2];

                    const imgSrc = `../../../assets/img/project7/${imgType}${checkedIndex}.png`;

                    // 스텝별로 이미지 갯수만큼 처리
                    const startIdx = maxImgs.slice(0, step - 1).reduce((a, b) => a + b, 1);
                    const endIdx = startIdx + maxImgs[step - 1] - 1;

                    if (this.checked) {
                        // 빈 img요소 찾아 이미지 삽입
                        for (let i = startIdx; i <= endIdx; i++) {
                            let liImg = $(`.dosirak li:nth-child(${i}) img`);
                            if (!liImg.attr('src')) {
                                liImg.attr('src', imgSrc);
                                break;
                            }
                        }
                    } else {
                        // 이미지 src를 찾아서 제거
                        for (let i = endIdx; i >= startIdx; i--) {
                            let liImg = $(`.dosirak li:nth-child(${i}) img`);
                            if (liImg.attr('src') === imgSrc) {
                                liImg.attr('src', '');
                                break;
                            }
                        }
                    }
                }
            });
        };

        // 랜덤 토스트 팝업
        function toastPop(step) {
            var randomPop;
            if (step <= 3) {
                randomPop = Math.random() < 0.5 ? '.toast_pop.pop01' : '.toast_pop.pop02';
            } else if (step > 3) {
                randomPop = Math.random() < 0.5 ? '.toast_pop.pop03' : '.toast_pop.pop04';
            }
            $(randomPop).addClass('active');
            setTimeout(function() {
                $(randomPop).removeClass('active');
            }, 1000)
        }
        $('.swiper-button-next').on('click', function() {
            const currentStep = swiper.activeIndex + 1;
            toastPop(currentStep);
        });

        // 결과 페이지
        function resultPage(step) {
            $(`.step0${step} li input[type="checkbox"]`).on('change', function() {
                const resultText = $(this).closest('li').find('.name').text();
                const resultContainer = $(`.step0${step}_result .list_wrap`);

                if (this.checked) {
                    resultContainer.append(`<p>${resultText}</p>`);
                } else {
                    resultContainer.find(`p:contains('${resultText}')`).remove();
                }
            })
        };

        // 스텝별 checkbox 변화에 따라 갱신
        for (let i = 1; i <= 4; i++) {
            updateImage(i);
            resultPage(i);
            $(`.step0${i}`).on('change', 'input[type="checkbox"]', function() {
                activeButton(i);
            });
        }
        // swiper 이전, 다음 버튼 클릭 시 모든 step 상태 갱신
        $('.project7 .swiper-button-next, .swiper-button-prev').on('click', function() {
            for (let i = 1; i <= 4; i++) {
                activeButton(i);
            }
        });
    </script>
</body>

</html>